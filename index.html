<!DOCTYPE html>
<html>
  <head>
    <script src='jquery.js'></script>
    <script src='data_generator.js'></script>
    <link href='https://fonts.googleapis.com/css?family=K2D:100,400,400i,700' rel='stylesheet'>
    <link href='http://fonts.googleapis.com/css?family=Pacifico' rel='stylesheet'>
    <link rel='stylesheet' href='style.css'>
  </head>
  <body>
    <header>
      
      <h1>Tweedler</h1> 
      

      </header>
  
  <div class = 'container about'></div>
  <div class = 'container feed'>
    <div class = 'button'>
    <a href = '#' class = 'show'> <img src = '' id = 'showImage'> <span id = 'showText'>more nonsense</span></a>
    </div>
    <div class='stream'>

    </div>

  </div>



    <script>
        var addZero = function(mins){
            if (mins <10){
              mins = '0' + mins;
            }
            return mins;
        } 
        
        var timeStamp = function(tweetTime){
          var h = tweetTime.getHours();
          var m = tweetTime.getMinutes();
          var amPM = 'AM';
          
          if (h >= 12){
            amPM = 'PM';
            if (h > 12){
              h = h - 12;
            }
          }
          return h + ':' + addZero(m) + ' ' + amPM;
        }
      $(document).ready(function(){
        //var $body = $('body');
        //$body.html('');
        
        //show first 11 tweets
        var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];
          var tweetDiv = $('<div class = "userTweets" id ="' + tweet.user + '"></div>');
          var tweetUser = $('<span class="user"></span>');
          var tweetMessage = $('<span class="message"></span>');
          var tweetTime = $('<span class="time"></span>');

          tweetDiv.appendTo('.stream');
          tweetUser.text('@' + tweet.user + ': ').css('font-weight','Bold').appendTo(tweetDiv);
          tweetMessage.text(tweet.message).appendTo(tweetDiv);
          tweetTime.text(' at ' + timeStamp(tweet.created_at)).css('font-weight','200').appendTo(tweetDiv);
          
          index -= 1;
        }

        // show new tweets on button click
        var newIndex = 11;
        $('.show').click(function(){
          var tweet = streams.home[newIndex];
          var tweetDiv = $('<div class = "userTweets" id ="' + tweet.user + '"></div>');
          var tweetUser = $('<span class="user"></span>');
          var tweetMessage = $('<span class="message"></span>');
          var tweetTime = $('<span class="time"></span>');

          $('.stream').prepend(tweetDiv);
          tweetUser.text('@' + tweet.user + ': ').css('font-weight','Bold').appendTo(tweetDiv);
          tweetMessage.text(tweet.message).appendTo(tweetDiv);
          tweetTime.text(' at ' + timeStamp(tweet.created_at)).css('font-weight','200').appendTo(tweetDiv);
          newIndex +=1;
        });

        // hover mouse style
        //$('.')

        
        // user timeline
        $('.stream').on('click', '.userTweets' , function(){
          // event.preventDefault();

          var userName = $(this).attr('id');
          
          
          $('.userTweets').not('div:contains("' + userName + '")').hide(400);
          $('div:contains("' + userName + '")').show(400);
        })





      //show image on hover on button
        $('.button').hover(function(){
          $('.button').css('background-color', '#fff');
          $('#showText').hide();
          $('#showImage').attr('src', 'cheshirecat.png');
        },
        function(){
          $('.button').css('background-color', '#000');
          $('#showText').show();
          $('#showImage').attr('src', '');
        }
        )


        
      });
      

    </script>
  </body>
</html>
